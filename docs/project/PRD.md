# 📄 PRD: 차세대 Claude Code 자동화 도구 (개정판)

## 1. 개요 (Overview)
- **제품명 (가칭):** claude-auto-worker  
- **목표:**  
  개인 개발자가 Claude Code를 더 안전하고, 유연하고, 확장 가능하게 자동화할 수 있는 오픈소스 도구 제공.  
  VS Code Autopilot의 한계를 보완하고, 에디터 종속성 없이 동작하며, 워크플로우 DSL·정책 기반 필터링·테스트/Git 연동 등 **실질적 개발 생산성** 기능을 제공.

---

## 2. 문제 정의 (Problem Statement)
기존 Claude Autopilot의 한계:
- VS Code 확장에 종속 → CLI/API 기반 자동화 부족.  
- 작업 큐 관리 단순 → DSL, 시각화 부족.  
- Git/테스트/CI 통합 없음.  
- 장시간 실행 안정성/로깅 부족.  
- 정책 기반 안전장치 미지원.  
- 플러그인 아키텍처 부재.  
- 팀 협업 및 권한 관리 부재.
- 크로스 플랫폼 지원 제한적.
- 엔터프라이즈급 보안 및 감사 기능 부족.

이로 인해 개인 개발자는 야간·장시간 작업 자동화는 가능하지만, **안전성·투명성·품질 보증·팀 협업·엔터프라이즈급 기능이 부족**한 상태.

---

## 3. 제품 목표 (Goals)
1. **안전한 자동화**  
   - Git 브랜치 격리 커밋, 테스트 실행/검증, 정책 필터링 제공.
2. **맥락 & 사용성 보완**  
   - DSL 기반 워크플로 정의, 자동 컨텍스트 요약·압축, 작업별 상세 로깅.
3. **확장성 확보**  
   - 플러그인 구조, CLI/API 모드, 외부 툴 연동.
4. **개발자 친화 UI/UX**  
   - CLI 우선 → Web Dashboard → VS Code Extension 단계적 확장.
5. **팀 협업 지원**
   - 팀 멤버 관리, 권한 제어, 실시간 협업, 워크플로우 공유.
6. **엔터프라이즈급 기능**
   - 고급 보안 정책, 감사 시스템, 성능 모니터링, 확장성 보장.

---

## 4. 주요 기능 (Key Features)

### 4.1 자동화 실행
- 작업 큐 관리 (기본).  
- Usage limit 감지 → 대기/재개.  
- Adaptive polling (ETA 기반 재시도).  

### 4.2 워크플로 정의 (DSL)
- YAML/JSON 기반 DSL 지원:
  ```yaml
  stages:
    - name: refactor
      prompt: refactor.md
      apply_changes: true
      branch: nightly-refactor
    - name: test
      run: ["pytest -q", "eslint ."]
    - name: docs
      prompt: "Update docs"
  ```

### 4.3 품질 보증 & 안전장치
- Git 브랜치 격리, 자동 커밋.  
- 테스트 자동 실행 → 실패 시 rollback/보류.  
- 정책 필터 (금지 명령, 경로 제한, 변경 라인수 제한).  
- 컨텍스트 자동 요약/압축 관리.  

### 4.4 확장성
- 플러그인 구조: 알림(Slack, Email), 정적분석, 배포전략 등.  
- CLI 모드 + REST API 지원 → CI/CD 파이프라인 통합.  

### 4.5 팀 협업 기능
- **팀 멤버 관리 및 권한 시스템**
  - 팀 생성, 수정, 삭제 및 멤버 초대/제거
  - 역할 기반 권한 제어 (Admin, Member, Viewer)
  - 팀별 워크플로우 접근 권한 관리
  - JWT 기반 팀 인증 시스템

- **실시간 알림 시스템**
  - Slack Webhook 연동 및 메시지 전송
  - Email 서비스 연동 (SMTP, SendGrid 등)
  - 알림 템플릿 시스템 및 커스터마이징
  - 실시간 알림 구독 및 전송 큐

- **워크플로우 공유 및 협업**
  - 워크플로우 공유 및 권한 설정
  - 팀 내 워크플로우 검색 및 필터링
  - 협업 댓글 및 피드백 시스템
  - 워크플로우 버전 관리 및 변경 이력

- **팀별 템플릿 및 분석**
  - 팀별 워크플로우 템플릿 관리
  - 협업 로그 및 감사 시스템
  - 팀 성과 분석 및 리포팅
  - 자동화 ROI 및 시간 절약 효과 계산

### 4.6 크로스 플랫폼 지원
- **REST API 및 SDK**
  - OpenAPI 3.0 스펙 문서 자동 생성
  - Python, Node.js, Go SDK 개발 및 배포
  - API 테스트 인터페이스 (Swagger UI)
  - API 버전 관리 및 변경 이력

- **외부 도구 연동**
  - CI/CD 파이프라인 통합 가이드
  - GitHub Actions, GitLab CI/CD, Jenkins 등 지원
  - 플러그인 개발 가이드 및 예제
  - 크로스 플랫폼 테스트 및 검증

### 4.7 엔터프라이즈급 기능
- **고급 정책 엔진**
  - 복잡한 조건부 정책 규칙 지원
  - 정책 우선순위 및 충돌 해결 시스템
  - 동적 정책 생성 및 수정 API
  - 정책 성능 최적화 및 캐싱

- **Git 워크플로우 고도화**
  - 자동 PR 생성 및 브랜치 관리
  - 코드 리뷰 자동화 및 품질 검사
  - Git 이벤트 기반 워크플로우 트리거
  - Git 히스토리 분석 및 인사이트

- **보안 및 감사 시스템**
  - 보안 취약점 스캔 및 자동 감지
  - 접근 제어 및 인증 강화
  - 데이터 암호화 및 보안 전송
  - 보안 감사 로그 및 모니터링

### 4.8 UI/UX 전략
- **📝 추천 전략 반영**
  - **MVP:** CLI + 간단한 웹 대시보드 (로그/상태 뷰어 정도)  
  - **로드맵 2단계:** 웹 터미널 에뮬레이터 (xterm.js 연동)  
  - **장기:** VS Code Extension + Web UI에서 본격 지원

### 4.9 VS Code Extension 통합
- **명령 팔레트**: 워크플로우 실행, 대시보드 열기, 정책 설정 등
- **사이드바 패널**: 워크플로우 상태, 실행 이력, 큐 관리
- **상태바**: 현재 실행 상태 (Idle/Running/Limit) 실시간 표시
- **실시간 모니터링**: WebSocket을 통한 상태 업데이트 및 로그 스트리밍
- **통합 워크플로우**: VS Code에서 직접 DSL 파일 편집 및 실행
- **Git 연동**: 브랜치 상태, 커밋 이력, PR 생성 링크 등 표시

---

## 5. 비기능 요구사항 (Non-Functional Requirements)
- **안정성**: 장시간 실행 시 메모리 누수 최소화, 자동 자원 정리, 메모리 워치독 시스템.
- **보안**: 환경변수 기반 API Key 관리, 웹 UI 비밀번호/토큰 보호, VS Code Extension 보안 모범 사례 적용, OWASP Top 10 취약점 방지.
- **호환성**: Linux/WSL/macOS/Windows 지원, Dockerized 배포 옵션, 다양한 Node.js 버전 호환성.
- **확장성**: 플러그인 SDK 제공, API 기반 통합, 외부 도구 연동.
- **성능**: VS Code Extension UI 응답성 보장, 대용량 로그 처리 최적화, 성능 메트릭 수집 및 분석.
- **사용성**: VS Code 재시작 시 상태 복구, 에러 복구 및 재연결 로직, 접근성 및 WCAG 준수.
- **품질**: 단위 테스트 커버리지 95% 이상, 포괄적인 테스트 스위트, 자동화된 테스트 파이프라인.

---

## 6. 타겟 사용자 (Target Users)
- **개인 개발자**: 야간 자동화, 반복 리팩터링, 문서화 자동화.
- **소규모 팀**: Git/테스트 통합으로 품질 관리, 팀 협업 및 워크플로우 공유.
- **VS Code 사용자**: IDE 통합을 통한 편리한 워크플로우 관리.
- **엔터프라이즈 팀**: 정책 기반 보안, 감사 시스템, 권한 관리가 필요한 조직.
- **DevOps 팀**: CI/CD 파이프라인 통합, 자동화 워크플로우 관리.
- **오픈소스 커뮤니티**: 확장 가능한 플러그인 시스템, 다중 언어 SDK 지원.

---

## 7. 경쟁/차별화 요소

| 항목               | 기존 도구들 | claude-auto-worker |
|--------------------|-------------|-------------------|
| IDE 종속성         | 특정 IDE 한정 | 독립 실행 + IDE 통합 |
| 워크플로우 정의    | 수동 입력    | DSL 기반 자동화 |
| Git/테스트 통합    | 제한적      | 완전 통합 |
| 정책 필터링        | 없음        | O |
| 컨텍스트 요약 관리 | 없음        | O |
| 플러그인 아키텍처  | 없음        | O |
| 팀 협업 지원       | 없음        | O |
| 크로스 플랫폼 API  | 제한적      | O |
| 엔터프라이즈급 보안| 기본적      | 고급 보안 정책 |
| UI                 | 단순 리스트  | CLI + Dashboard + VS Code Extension |
| 확장성             | 제한적      | 플러그인 + REST API + WebSocket |
| 품질 보증          | 기본적      | 포괄적인 테스트 + 성능 최적화 |

---

## 8. MVP 범위
- CLI 실행 + Usage limit 자동 감지/재개.  
- DSL 파서(YAML).  
- Git 브랜치 격리 커밋.  
- 테스트 자동 실행/로그 저장.  
- 간단한 웹 대시보드 (로그/상태 뷰어).  
- 기본 정책 엔진 및 보안 기능.

---

## 9. 향후 로드맵

### **Phase 1: 기반 인프라 및 CLI (1-4주)**
- 프로젝트 초기화 및 NestJS 설정 ✅
- CLI 모듈 개발 및 기본 명령어 ✅
- DSL 파서 기본 구조 ✅

### **Phase 2: 핵심 엔진 및 Git 통합 (5-8주)**
- 워크플로우 실행 엔진 ✅
- Git 통합 및 테스트 자동화 ✅
- 웹 대시보드 MVP ✅

### **Phase 3: 정책 엔진 및 보안 (9-12주)**
- 정책 기반 안전장치 ✅
- 보안 및 감사 시스템 ✅
- 실시간 모니터링 ✅

### **Phase 4: 팀 협업 기능 (13-16주)**
- 팀 멤버 관리 및 권한 시스템
- 실시간 알림 및 협업 도구
- 워크플로우 공유 및 템플릿

### **Phase 5: 크로스 플랫폼 API (17-20주)**
- REST API 완성 및 OpenAPI 스펙
- 다중 언어 SDK 개발
- CI/CD 파이프라인 통합

### **Phase 6: 엔터프라이즈급 기능 (21-24주)**
- 고급 정책 엔진 및 규칙 관리
- Git 워크플로우 고도화
- 보안 및 감사 시스템 강화

### **Phase 7: 품질 및 사용자 경험 (25-28주)**
- 포괄적인 테스트 스위트
- UI/UX 최적화 및 성능 개선
- 보안 감사 및 취약점 검사

### **Phase 8: VS Code Extension (29-32주)**
- VS Code Extension 개발 및 배포
- IDE 통합 및 워크플로우 관리
- 마켓플레이스 배포 준비

### **Phase 9: 플러그인 시스템 (33-36주)**
- 플러그인 아키텍처 완성
- 기본 플러그인 개발
- 플러그인 생태계 구축

### **Phase 10: 최적화 및 배포 (37-40주)**
- 성능 최적화 및 스케일링
- 모노레포 전환 및 통합
- 프로덕션 배포 준비

---

## 10. 성공 지표 (Success Metrics)

### **기술적 지표**
- 테스트 커버리지 95% 이상 달성
- API 응답 시간 200ms 이하
- 메모리 사용량 최적화 (1GB 이하)
- 크로스 플랫폼 호환성 100%

### **사용자 경험 지표**
- 사용자 온보딩 완료율 80% 이상
- 워크플로우 실행 성공률 95% 이상
- 사용자 만족도 4.5/5.0 이상
- 팀 협업 효율성 30% 향상

### **비즈니스 지표**
- 오픈소스 커뮤니티 기여자 100명 이상
- GitHub 스타 500개 이상
- 플러그인 생태계 50개 이상
- 엔터프라이즈 고객 10개 조직 이상

---

## 11. 위험 요소 및 대응 방안

### **기술적 위험**
- **Claude API 변경**: API 버전 관리 및 호환성 보장
- **성능 병목**: 지속적인 성능 모니터링 및 최적화
- **보안 취약점**: 정기적인 보안 감사 및 업데이트

### **사용자 채택 위험**
- **학습 곡선**: 상세한 문서화 및 튜토리얼 제공
- **기존 도구 의존성**: 점진적 마이그레이션 가이드 제공
- **팀 협업 저항**: 사용자 피드백 수집 및 지속적 개선

### **경쟁 위험**
- **기존 도구 개선**: 지속적인 혁신 및 차별화
- **새로운 경쟁자**: 커뮤니티 기반 생태계 구축
- **기술 변화**: 유연한 아키텍처 및 확장성 보장
