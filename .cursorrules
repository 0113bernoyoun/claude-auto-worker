# Claude Auto Worker - Cursor Development Rules

## 🚀 프로젝트 개요
- **프로젝트명**: claude-auto-worker
- **설명**: 차세대 Claude Code 자동화 도구 - 안전하고, 유연하고, 확장 가능한 워크플로우 엔진
- **기술 스택**: NestJS, Next.js, TypeScript, Node.js

## 🔧 핵심 설정
- **포트**: 5849 (기본값)
- **API 엔드포인트**: http://localhost:5849/api
- **개발 서버**: http://localhost:5849
- **빌드 출력**: ./dist

## 📁 프로젝트 구조
```
claude-auto-worker/
├── src/
│   ├── app.module.ts          # 루트 모듈
│   ├── app.controller.ts      # 루트 컨트롤러
│   ├── app.service.ts         # 루트 서비스
│   ├── main.ts               # 애플리케이션 진입점
│   ├── core/                 # 핵심 기능 모듈
│   ├── cli/                  # CLI 관련 모듈
│   ├── dashboard/            # Next.js 대시보드
│   ├── git/                  # Git 통합 모듈
│   ├── parser/               # 파싱 관련 모듈
│   ├── shared/               # 공유 유틸리티
│   └── config/               # 설정 모듈
├── tests/                    # 테스트 파일들
├── docs/                     # 문서
└── tools/                    # 개발 도구
```

## 🎯 개발 가이드라인

### NestJS 모듈 생성 시
- 모든 모듈은 `@Module()` 데코레이터 사용
- 의존성 주입을 위한 `@Injectable()` 데코레이터 사용
- 컨트롤러는 `@Controller()` 데코레이터 사용

### 포트 사용
- **항상 포트 5849를 기본값으로 사용**
- 환경변수 `PORT`로 오버라이드 가능
- 다른 포트 사용 시 반드시 문서화

### API 설계
- 모든 API 엔드포인트는 `/api` 프리픽스 사용
- RESTful API 설계 원칙 준수
- 적절한 HTTP 상태 코드 사용

### TypeScript 설정
- strict 모드 활성화
- 데코레이터 메타데이터 활성화
- 경로 별칭 사용 (`@/*`, `@shared/*`, `@core/*` 등)

## 🚨 주의사항
- 포트 5849는 이 프로젝트 전용으로 예약됨
- 다른 프로젝트와 포트 충돌 시 환경변수 `PORT` 사용
- 모든 API 변경사항은 문서화 필수

## 🔧 개발 도구 및 워크플로우

### GitHub CLI 사용
- **항상 GitHub CLI (`gh`)를 사용하여 저장소 관리**
- `gh repo create` - 새 저장소 생성
- `gh repo clone` - 저장소 클론
- `gh repo view` - 저장소 정보 확인
- `gh pr create` - Pull Request 생성
- `gh issue create` - 이슈 생성
- `gh workflow run` - GitHub Actions 워크플로우 실행

### Pull Request 워크플로우
- **새로운 기능/수정 시 반드시 새 브랜치 생성**
- `git checkout -b feature/기능명` 또는 `git checkout -b fix/수정명`
- 작업 완료 후 `gh pr create`로 Pull Request 생성
- **main 브랜치에 직접 커밋 금지**
- PR 리뷰 후 merge 진행

### Agent 디렉토리 활용
- **AI Agent 관련 파일들은 `agent/` 디렉토리에 배치**
- 새로운 AI Agent 생성 시: `agent/agent-name.md` 형식으로 작성
- 기존 Agent 파일 수정 시: `agent/` 디렉토리 내에서 작업
- Agent 간 협업 시: `agent/` 디렉토리 내 파일들을 참조하여 통합

### 머지 후 문서 업데이트 (수동 자동화)
- 이 채팅에서 사용자가 "PR 머지됨" 또는 "머지 처리" 지시를 내리면, 별도 스크립트나 GitHub Actions 없이 에이전트가 즉시 다음을 수행한다.
  - **dev-notes**: `dev-notes/[작업ID]-완료-문서.md` 생성/갱신 (작업ID는 `TASK-\d{3}` 규칙으로 PR 제목/본문에서 추출)
  - **프로젝트 상태**: `PROJECT_STATUS.md` 갱신 (요구 문서명 `status.md`에 해당)
  - **README 진행상황**: `README.md`에 최신 머지 이력/진행상황 반영
  - **태스크 완료 표시**: `DEVELOPMENT_TASKS.md`에서 해당 작업 체크 처리 (요구 문서명 `tasks.md`에 해당)
- 브랜치/PR 규칙: 항상 새 브랜치에서 작업 → PR 생성 → 리뷰 후 머지. `main` 직접 커밋 금지
- 저장소 관리는 **GitHub CLI(`gh`)**를 우선 사용한다. (예: `gh pr create`, `gh pr merge --merge`)
- 자동화는 이 프롬프트 내에서 에이전트가 직접 파일을 수정/커밋/푸시하여 반영한다. (CI 의존 없음)

## 📝 코드 예시

### 기본 컨트롤러 구조
```typescript
import { Controller, Get } from '@nestjs/common';

@Controller('example')
export class ExampleController {
  @Get()
  findAll(): string {
    return 'This action returns all examples';
  }
}
```

### 기본 서비스 구조
```typescript
import { Injectable } from '@nestjs/common';

@Injectable()
export class ExampleService {
  findAll(): string[] {
    return ['example1', 'example2'];
  }
}
```

### 환경변수 설정
```typescript
// .env 파일
PORT=5849
NODE_ENV=development
```

## 🔍 디버깅 및 테스트
- `npm run start:dev`: 개발 모드 실행 (포트 5849)
- `npm run build`: 프로덕션 빌드
- `npm run test`: 단위 테스트 실행
- `npm run test:e2e`: E2E 테스트 실행

## 📚 참고 자료
- NestJS 공식 문서: https://docs.nestjs.com/
- TypeScript 핸드북: https://www.typescriptlang.org/docs/
- 프로젝트 문서: ./docs/ 디렉토리
